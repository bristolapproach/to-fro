{% extends 'layouts/application.html' %}

{% block 'content' %}
<div class="card">
  <div class="card-body space-3">
    {% if job.helper == helper and job.job_status.name != 'pending_help' and job.job_status.name != 'helper_interest' %}
    <div class="border-bottom mb-3 pb-3 space-3">
      {% include './_requester_detail.html' with requester=job.requester %}
      {% if job.private_description %}
      <h3 class="mb-0 text-muted">Here's what they need exactly</h3>
      {{job.private_description}}
      {% endif %}
    </div>
    {% endif %}
    <div>
      {{job.public_description}}
    </div>
  </div>
  <div class="card-footer">
    {% if job.job_status.name == 'pending_help' %}
    <form method="POST">
      {% csrf_token %}
      <button class="btn d-table mx-auto btn-primary" name="action" value="accept_help">
        I'll help!
      </button>
    </form>
    {%else %}
    {% if job.helper != helper %}
    <p class="text-center">Someone's on it, but thanks for thinking of it!</p>
    {% else %}
    {% if job.job_status.name == 'helper_interest' %}
    {% if job.helper == helper %}
    <p class="text-center">Thanks for volunteering! We'll be back in touch soon!</p>
    {% else %}

    {% endif %}
    {% elif job.job_status.name == 'helper_assigned' %}
    <a class="btn d-table mx-auto btn-primary" href="{% url 'tasks:complete' job.id%}">
      All done!
    </a>
    {% else %}
    <p>Thanks for helping!</p>
    {% endif %}
    {% endif %}
    {% endif %}
  </div>
</div>
{% endblock %}